<header class="sheet-header">
  {{!-- Profile Image --}}
  <img class="profile-img" src="{{actor.img}}" data-edit="img" data-action="editImage" title="{{actor.name}}" height="100" width="100"/>
  
  <div class="header-fields">
    <div class="row">
      <label>Name</label>
      <input name="name" type="text" value="{{actor.name}}"/>
    </div>

    <div class="row">
      <label>Nature</label>
      <input name="system.bio.nature" type="text" value="{{system.bio.nature}}"/>
    </div>

    <div class="row">
      <label>Gravity (Home/Current)</label>
      <div class="flexrow" style="justify-content: flex-start; gap: 5px;">
        <select name="system.bio.gravityHome">
          {{selectOptions @root.config.gravityTypes selected=system.bio.gravityHome}}
        </select>
        <span style="flex: 0 0 auto;">/</span>
        <select name="system.bio.gravityCurrent">
           {{selectOptions @root.config.gravityTypes selected=system.bio.gravityCurrent}}
        </select>
      </div>
    </div>

    {{!-- XP Field --}}
    <div class="row">
      <label>XP (Total / Unspent)</label>
      <div class="flexrow" style="align-items: center; gap: 5px;">
        
        {{!-- Total XP Input --}}
        <input name="system.experience.total" type="number" value="{{system.experience.total}}" placeholder="0" style="text-align: center;" title="Total Earned XP"/>
        
        <span style="flex: 0 0 auto;">/</span>
        
        {{!-- Unspent Display --}}
        <span title="Unspent XP" style="font-weight: bold; font-size: 1.1em; {{#if (lt system.experience.unspent 0)}}color:var(--cw-fail);{{else}}color:var(--cw-success);{{/if}}">
            {{system.experience.unspent}}
        </span>

        {{!-- NEW: Reset Button (Only in Edit Mode) --}}
        {{#if system.editMode}}
            <a data-action="resetXP" title="Reset 'Spent XP' to 0" style="margin-left: 5px; color: var(--cw-fail);">
                <i class="fas fa-undo"></i>
            </a>
        {{/if}}

      </div>
    </div>

    {{!-- Edit/Lock Toggle --}}
    <div class="row" style="margin-top: 5px;">
        <div class="flexrow" style="justify-content: flex-end;">
            <a data-action="toggleEditMode" title="{{#if system.editMode}}Lock Sheet (Play Mode){{else}}Unlock Sheet (Edit Mode){{/if}}">
                {{#if system.editMode}}
                    <i class="fas fa-unlock" style="color: var(--cw-accent);"></i> <span style="font-size: 0.9em;">Unlocked</span>
                {{else}}
                    <i class="fas fa-lock" style="color: #888;"></i> <span style="font-size: 0.9em; color: #888;">Locked</span>
                {{/if}}
            </a>
        </div>
    </div>

  </div>
</header>