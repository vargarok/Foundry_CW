<div class="tab-content {{#if (eq activeTab 'attributes')}}active{{/if}}">
  <div class="attributes-grid">
    
    {{!-- Physical --}}
    <div class="attr-column">
      <h3>Physical</h3>
      {{#each viewAttributes.physical as |attr|}}
        <div class="attr-row">
          <a data-action="rollAttribute" data-attr="{{attr.key}}">{{localize attr.label}}</a>
          <div class="flexrow" style="align-items: center; justify-content: flex-end; gap: 5px;">
              
              {{!-- MOVED: Show Effective Value to the LEFT of the input --}}
              {{#if attr.isModified}}
                <span style="font-weight: bold; {{attr.cssClass}}">
                    ({{attr.effective}})
                </span>
              {{/if}}

              {{!-- Edit the Base Value (Now consistently on the right) --}}
              <input type="number" name="system.attributes.{{attr.key}}.value" value="{{attr.base}}" style="width: 30px; text-align: center;"/>
              
          </div>
        </div>
      {{/each}}
    </div>
    
    {{!-- Social --}}
    <div class="attr-column">
      <h3>Social</h3>
      {{#each viewAttributes.social as |attr|}}
        <div class="attr-row">
          <a data-action="rollAttribute" data-attr="{{attr.key}}">{{localize attr.label}}</a>
          <div class="flexrow" style="align-items: center; justify-content: flex-end; gap: 5px;">
              {{!-- MOVED --}}
              {{#if attr.isModified}}
                <span style="font-weight: bold; {{attr.cssClass}}">({{attr.effective}})</span>
              {{/if}}

              <input type="number" name="system.attributes.{{attr.key}}.value" value="{{attr.base}}" style="width: 30px; text-align: center;"/>
          </div>
        </div>
      {{/each}}
    </div>

    {{!-- Mental --}}
    <div class="attr-column">
      <h3>Mental</h3>
      {{#each viewAttributes.mental as |attr|}}
        <div class="attr-row">
          <a data-action="rollAttribute" data-attr="{{attr.key}}">{{localize attr.label}}</a>
          <div class="flexrow" style="align-items: center; justify-content: flex-end; gap: 5px;">
              {{!-- MOVED --}}
              {{#if attr.isModified}}
                <span style="font-weight: bold; {{attr.cssClass}}">({{attr.effective}})</span>
              {{/if}}

              <input type="number" name="system.attributes.{{attr.key}}.value" value="{{attr.base}}" style="width: 30px; text-align: center;"/>
          </div>
        </div>
      {{/each}}
    </div>
  </div>

  {{!-- Derived Stats & Health (Unchanged) --}}
  <div class="derived-row">
      <div class="panel">
        <h3>Derived Stats</h3>
        <div class="grid-2">
            <div>
                <strong>Initiative:</strong> 
                <a data-action="rollInitiative" title="Roll Initiative">{{system.derived.initiative}}</a>
            </div>
            
            <div>
                <strong>Cyberload:</strong>
                {{system.derived.immuneLoad}} / {{system.attributes.sta.value}}
                {{#if (lt system.derived.immunePenalty 0)}}
                    <span style="color: var(--cw-fail); font-size: 0.9em;">({{system.derived.immunePenalty}})</span>
                {{/if}}
            </div>

            <div><strong>Throw Range:</strong> {{system.derived.throwRange}} m</div>
            <div><strong>Walk:</strong> {{system.derived.moveWalk}} m</div>
            <div><strong>Run:</strong> {{system.derived.moveRun}} m</div>
            <div><strong>Sprint:</strong> {{system.derived.moveSprint}} m</div>
        </div>
    </div>
  </div>
</div>